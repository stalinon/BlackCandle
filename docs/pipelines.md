| ‚Ññ | –ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–π–ø–ª–∞–π–Ω–∞                    | ID                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|----------------------------------------|------------------------|------------|
| 1 | –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è                        | `PortfolioAnalysis`    | –û—Å–Ω–æ–≤–Ω–æ–π –∞–Ω–∞–ª–∏–∑ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ –≤—Ä—É—á–Ω—É—é |
| 2 | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫       | `AutoTradeExecution`   | –°–æ–≤–µ—Ä—à–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–≥–Ω–∞–ª–æ–≤ |
| 3 | –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π          | `TelegramReporting`    | –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ |
| 4 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º               | `SchedulerPipeline`    | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ cron-–∑–∞–¥–∞—á |
| 5 | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è      | `UserOnboarding`       | –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ —é–∑–µ—Ä–∞ |
| 6 | –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è              | `FailureRecovery`      | –ü–æ–≤—Ç–æ—Ä –∞–Ω–∞–ª–∏–∑–∞ –∏–ª–∏ —Å–¥–µ–ª–æ–∫ –ø–æ—Å–ª–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è |
| 7 | –ò–º–ø–æ—Ä—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è        | `PortfolioSync`        | –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±—Ä–æ–∫–µ—Ä–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç API) |
| 8 | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—á–µ—Ç–∞         | `HistoricalReport`     | –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ –¥–∞—Ç–µ |

---

## üß† –ü–∞–π–ø–ª–∞–π–Ω `PortfolioAnalysis` ‚Äî –ê–Ω–∞–ª–∏–∑ –ø–æ—Ä—Ç—Ñ–µ–ª—è

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                     | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|----------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è                | `PortfolioService.GetCurrentPortfolio()` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –∞–∫—Ç–∏–≤—ã                                  |
| 2        | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö        | `MarketDataAggregator.FetchHistoricalData()` + `SmartLabClient` –¥–ª—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª–∫–∏                  |
| 3        | –†–∞—Å—á–µ—Ç —Ç–µ—Ö. –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤          | `IndicatorService.CalculateIndicators()` ‚Äî Skender –≤ –¥–µ–ª–æ                                           |
| 4        | –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥          | `FundamentalScoringService.Score()` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ P/E, –¥–∏–≤–∏–¥–µ–Ω–¥–∞–º –∏ —Ç.–¥.                         |
| 5        | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤               | `SignalService.GenerateSignals()` ‚Äî Buy / Sell / Hold                                              |
| 6        | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞            | `AnalysisResultRepository.Save()` ‚Äî –∑–∞–ø–∏—Å—ã–≤–∞–µ–º `PortfolioAnalysisResult` –∏ `TradeSignal`          |
| 7        | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ                      | `LoggerService.LogStep()` ‚Äî –ª–æ–≥–∏ –¥–ª—è –∞–¥–∞ –∏ –æ—Ç–∫–∞—Ç–∞                                                  |

---

## ü§ñ –ü–∞–π–ø–ª–∞–π–Ω `AutoTradeExecution` ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                         | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|--------------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è                  | `BotSettings.EnableAutoTrading` ‚Äî –≤–∫–ª—é—á—ë–Ω –ª–∏ —Ä–µ–∂–∏–º –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–∏–Ω–≥–∞                                   |
| 2        | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤                   | –ë–µ—Ä—ë–º `TradeSignal` –∏–∑ –∞–Ω–∞–ª–∏–∑–∞                                                                     |
| 3        | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤                     | `PortfolioService.ValidateLimits()` ‚Äî –¥–æ–ª—è —Ç–∏–∫–µ—Ä–∞, –º–∏–Ω. —Å—É–º–º–∞ —Å–¥–µ–ª–∫–∏                               |
| 4        | –†–∞—Å—á–µ—Ç –æ–±—ä–µ–º–∞                        | `TradeExecutionService.CalculateVolume()` ‚Äî —Å–∫–æ–ª—å–∫–æ –ø–æ–∫—É–ø–∞—Ç—å/–ø—Ä–æ–¥–∞–≤–∞—Ç—å                             |
| 5        | –û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ä–¥–µ—Ä–∞                      | `BrokerTradeClient.PlaceMarketOrder()` ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è –∏–ª–∏ —Ñ–µ–π–∫–æ–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è                           |
| 6        | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è                  | `PortfolioService.Update()` ‚Äî –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ                                                           |
| 7        | –õ–æ–≥ —Å–¥–µ–ª–∫–∏                           | `LoggerService.LogStep("TradeExecuted")` + `ExecutedTrade`                                          |

---

## üì¨ –ü–∞–π–ø–ª–∞–π–Ω `TelegramReporting` ‚Äî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                   | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|--------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞            | `TelegramService.BuildReport()` ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–µ–∫—Å—Ç                          |
| 2        | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è             | `TelegramNotifier.Send()` ‚Äî –≤ –∫–∞–Ω–∞–ª –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é                                                   |
| 3        | –ü—Ä–∏–µ–º –∫–æ–º–∞–Ω–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)      | `TelegramCommandHandler.Handle()` ‚Äî –∫–æ–º–∞–Ω–¥—ã /status, /report, /autotrade_on                        |
| 4        | –õ–æ–≥ –æ—Ç–ø—Ä–∞–≤–∫–∏                   | `LoggerService.LogStep("TelegramSent")`                                                            |

---

## ‚è≤Ô∏è –ü–∞–π–ø–ª–∞–π–Ω `SchedulerPipeline` ‚Äî –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                 | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –ß—Ç–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è            | `CronScheduleReader.Read()` ‚Äî –ø–æ–ª—É—á–∞–µ—Ç crontab –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫                                         |
| 2        | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á–∏           | `ISchedulerAdapter.Register()` ‚Äî Quartz –∏–ª–∏ Hangfire                                                |
| 3        | –§–æ—Ä—Å-–∑–∞–ø—É—Å–∫ –≤—Ä—É—á–Ω—É—é          | `SchedulerController.TriggerNow()`                                                                 |
| 4        | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–æ–≤            | `BotStatus = Enabled/Disabled` ‚Äî –≤–∫–ª—é—á–∏—Ç—å –∏–ª–∏ –≤—ã–∫–ª—é—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑                                     |
| 5        | –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è      | `LoggerService.LogStep("Scheduled")`                                                               |

---

## üë∂ –ü–∞–π–ø–ª–∞–π–Ω `UserOnboarding` ‚Äî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                     | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|----------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ           | `UserRepository.Create()` ‚Äî –Ω–æ–≤—ã–π —é–∑–µ—Ä                                                              |
| 2        | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è   | `PortfolioService.Init()` ‚Äî –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫                                                           |
| 3        | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤               | `BotSettings.InitializeDefaults()`                                                                  |
| 4        | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ         | `TelegramNotifier.SendWelcome()`                                                                    |
| 5        | –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ                     | `LoggerService.LogStep("UserRegistered")`                                                           |

---

## üîÅ –ü–∞–π–ø–ª–∞–π–Ω `FailureRecovery` ‚Äî –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                     | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|----------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–∫–∏               | –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ –ª–æ–≥–∞–º –∏–ª–∏ failed job status                                                        |
| 2        | –ü–æ–≤—Ç–æ—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞        | `RunPortfolioAnalysisUseCase` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é                                                   |
| 3        | –ü–æ–≤—Ç–æ—Ä –∞–≤—Ç–æ—Ç—Ä–µ–π–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  | `TradeExecutionService.RetryFailed()` ‚Äî –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–≤–∞–ª–µ–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏                               |
| 4        | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è         | "–ü—Ä–æ–∏–∑–æ—à—ë–ª —Å–±–æ–π. –ü–æ–≤—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω."                                                                  |
| 5        | –õ–æ–≥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è               | `LoggerService.LogStep("RecoveryComplete")`                                                         |

---

## üîÑ –ü–∞–π–ø–ª–∞–π–Ω `PortfolioSync` ‚Äî –ò–º–ø–æ—Ä—Ç –ø–æ—Ä—Ç—Ñ–µ–ª—è (–≤ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ)

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                     | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|----------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±—Ä–æ–∫–µ—Ä—É            | `IBrokerSyncClient.Connect()` ‚Äî (Tinkoff, Finam –∏ —Ç.–¥.)                                             |
| 2        | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π                | `BrokerSyncClient.GetPortfolio()` ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ                                                |
| 3        | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π      | `PortfolioService.Compare()`                                                                       |
| 4        | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è   | `PortfolioService.Sync()`                                                                          |
| 5        | –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π                     | `LoggerService.LogStep("PortfolioSynced")`                                                          |

---

## üìà –ü–∞–π–ø–ª–∞–π–Ω `HistoricalReport` ‚Äî –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç

| **–≠—Ç–∞–ø** | **–ù–∞–∑–≤–∞–Ω–∏–µ**                     | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                                                         |
|----------|----------------------------------|------------------------------------------------------------------------------------------------------|
| 1        | –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞—Ç—ã –æ—Ç—á–µ—Ç–∞            | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞—Ç—É —á–µ—Ä–µ–∑ API –∏–ª–∏ Telegram                                                    |
| 2        | –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö         | `HistoricalDataService.Load(date)`                                                                 |
| 3        | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞                 | –ü–µ—Ä–µ—Å—á—ë—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ –¥–∞–Ω–Ω—ã–º –Ω–∞ —Ç–æ—Ç –¥–µ–Ω—å                                                            |
| 4        | –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ          | Telegram / PDF / JSON / API-–æ—Ç–≤–µ—Ç                                                                  |
| 5        | –õ–æ–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏                    | `LoggerService.LogStep("HistoricalReportGenerated")`                                                |
